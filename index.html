<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/jpg" href="logo.jpg">
    <title>form</title>  
    <style>
        body
        {
            background-color: #3457f5a4;
        }

        #box1
        {
            color: #eaeff1;
            border: 1px  rgb(1, 3, 3);
            margin: auto;
            width: 45%;
            height: auto;
            box-shadow: 4px 4px 6px #0f172a;
            border-radius: 4px;
        }

        h2
        {
            margin-left: 250px;
        }
        input
        {
            background-color: #71d1fada;
            border: 1px ;
            border-radius: 4px;
            height: auto;
            min-height: 18px;
            width:320px;
        }
        textarea
        {
            background-color: #71d1fada;
            border-radius: 4px;
            height: auto;
            min-height: 18px;
            width:320px; 
        }
        label
        {
            font-size: 14px;
        }
        button
        {
            background-color: #71d1fada;
            color:#ffffff ;
            border: 1px ;
            border-radius: 3px;
            margin: auto;
            margin-left: 80px;
            width: 150px;
            height: 20px;
        }
        input:hover
        {
        background-color: #90deff;
        transform: scale(1.05);

        }
        textarea:hover
        {
            background-color: #90deff;
            transform: scale(1.05);
        }
        button:hover
        {
            background-color: #90deff;
            transform: scale(1.1);
        }
        footer
        {
            color: #38bdf8;
            background-color: #ffffff;
        }
        select
        {
            background-color: #38bdf8;
            border: 1px ;
            height: auto;
            min-height: 18px;
            width:320px;
        }
        button:active
        {
            background-color: #ccc;
            color: #4967ee;
        }
        footer
        {
            margin-top: 40px;
            background-color: #4e97f7;
            color: #ffffff;
            height: 80px;
            text-align: center;
        }
        #loader
        {
            text-align: center;

        }
    </style>
</head>

<body>
    <main> 

        <div id="box1">
            <Pre>

                <form id="contactForm" action="#" method="POST">
                <h2>Message Us</h2>
                <label for="name">Name*</label>
                <input type="text" id="name" required placeholder="blanc">

                <label for="surname">Surname*</label>
                <input type="text" id="surname" required placeholder="nava">

                <label for="email">Email Address*</label>
                <input type="email" id="email" required placeholder="blanc288@gmail.com">

                <label for="subject">Subject*</label>
                <input type="text" id="subject" required >
                
                <label for="message">Message</label>
                <textarea id="message"  placeholder="Write your message......" rows="2" cols="40"></textarea>

                <div id="loader" style="display:none; color:white;">Submitting your message...</div>
                <button id="submitBtn" type="submit">Send Message</button>

                </form>

            </Pre>
        </div>

    </main>

    <Footer>
        <address>
            123 northland street
            Natlan
            Teyvat 3209

        </address>
        <p> 
            Phone
            +27 76 356 2766
            <br>
            Email 
            Programming@css.com
        </p>
    </Footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
        import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";


        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
        apiKey: "AIzaSyDSx4oFolDZF4lKWDxbO9DNHyzz186_bJo",
        authDomain: "step-up-program.firebaseapp.com",
        projectId: "step-up-program",
        storageBucket: "step-up-program.appspot.com",
        messagingSenderId: "232055446083",
        appId: "1:232055446083:web:01e77ec6974a86bc12d2f6",
        measurementId: "G-TEYLCJ83BS"
        };
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        //const analytics = getAnalytics(app);


        const form = document.getElementById("contactForm");
        const loader = document.getElementById("loader");
        const submitBtn = document.getElementById("submitBtn");


        function showLoader(show = true) {
        loader.style.display = show ? "block" : "none";
        submitBtn.disabled = show;
        }

        form.addEventListener("submit", async (e) => {
        e.preventDefault();

        // Show loader and disable button
        showLoader(true);

        const name = (document.getElementById("name").value || "").trim();
        const surname = (document.getElementById("surname").value || "").trim();
        const email = (document.getElementById("email").value || "").trim();
        const subject = (document.getElementById("subject").value || "").trim();
        const message = (document.getElementById("message").value || "").trim();

        // Basic client-side validation (optional)
        if (!name || !surname || !email || !subject || !message) {
            alert("Please fill in all fields.");
            showLoader(false);
            return;
        }

        try {
            // Add document to 'messages' collection
            await addDoc(collection(db, "messages"), {
            name,
            email,
            subject,
            message,
            createdAt: serverTimestamp()
            });

            // Show success to user
            loader.innerHTML = "<div class='spinner'></div><div class='message' style='color:green;'>✅ Message submitted successfully!</div>";

            // clear form
            form.reset();

            // hide loader after 2s and restore content
            setTimeout(() => {
            loader.innerHTML = "<div class='spinner'></div><div class='message'>Submitting your message...</div>";
            showLoader(false);
            }, 2000);

        } catch (err) {
            console.error("Firestore save error:", err);
            loader.innerHTML = "<div class='spinner'></div><div class='message' style='color:red;'>❌ Failed to send. Try again.</div>";
            setTimeout(() => {
            loader.innerHTML = "<div class='spinner'></div><div class='message'>Submitting your message...</div>";
            showLoader(false);
            }, 2000);
        }
        });
    </script>
</body>

</html>